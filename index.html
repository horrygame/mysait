<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYSTEM_BREACH.exe</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
            user-select: none;
        }
        
        body {
            background-color: #000;
            color: #0f0;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            position: fixed;
        }
        
        #matrix {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.3;
            pointer-events: none;
        }
        
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1;
            text-align: center;
        }
        
        h1 {
            color: #0f0;
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #0f0;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        h2 {
            color: #0f0;
            font-size: 2em;
            margin: 20px 0;
        }
        
        h3 {
            color: #0ff;
            font-size: 1.5em;
            margin: 10px 0;
        }
        
        .warning {
            color: #f00;
            font-size: 1.2em;
            animation: blink 1s infinite;
            font-weight: bold;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .btn {
            background-color: #002200;
            color: #0f0;
            border: 2px solid #0f0;
            padding: 15px 30px;
            font-size: 1.2em;
            margin: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 5px;
        }
        
        .btn:hover {
            background-color: #0f0;
            color: #000;
            box-shadow: 0 0 15px #0f0;
        }
        
        .btn-red {
            background-color: #220000;
            border-color: #f00;
            color: #f00;
        }
        
        .btn-red:hover {
            background-color: #f00;
            color: #fff;
            box-shadow: 0 0 15px #f00;
        }
        
        .btn-blue {
            background-color: #000022;
            border-color: #00f;
            color: #00f;
        }
        
        .btn-blue:hover {
            background-color: #00f;
            color: #fff;
            box-shadow: 0 0 15px #00f;
        }
        
        .question-container {
            max-width: 900px;
            width: 100%;
            background-color: rgba(0, 30, 0, 0.8);
            border: 2px solid #0f0;
            border-radius: 10px;
            padding: 20px;
            margin: 20px;
            text-align: left;
        }
        
        .question-text {
            color: #fff;
            font-size: 1.3em;
            margin-bottom: 30px;
            line-height: 1.5;
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin: 20px 0;
        }
        
        .option {
            background-color: #001100;
            border: 1px solid #0a0;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 5px;
        }
        
        .option:hover {
            background-color: #003300;
            border-color: #0f0;
        }
        
        .option.selected {
            background-color: #0a0;
            color: #000;
            font-weight: bold;
        }
        
        .question-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .question-list {
            position: fixed;
            left: 20px;
            top: 100px;
            background-color: rgba(0, 20, 0, 0.9);
            border: 1px solid #0a0;
            padding: 15px;
            border-radius: 5px;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .question-item {
            padding: 5px 10px;
            margin: 3px 0;
            cursor: pointer;
            border-radius: 3px;
        }
        
        .question-item.current {
            background-color: #0a0;
            color: #000;
            font-weight: bold;
        }
        
        .question-item.answered {
            color: #0f0;
        }
        
        .question-item.password {
            color: #0ff;
        }
        
        .password-input {
            background-color: #001100;
            color: #0f0;
            border: 2px solid #0a0;
            padding: 15px;
            font-size: 1.5em;
            width: 100%;
            text-align: center;
            letter-spacing: 5px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .keypad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            max-width: 300px;
            margin: 20px auto;
        }
        
        .keypad-btn {
            background-color: #002200;
            color: #0f0;
            border: 1px solid #0a0;
            padding: 20px;
            font-size: 1.5em;
            cursor: pointer;
            border-radius: 5px;
        }
        
        .keypad-btn:hover {
            background-color: #004400;
        }
        
        .lockdown-screen {
            background-color: #f00;
            animation: redPulse 0.5s infinite;
        }
        
        @keyframes redPulse {
            0%, 100% { background-color: #f00; }
            50% { background-color: #800; }
        }
        
        .lockdown-text {
            color: #fff;
            font-size: 3em;
            text-shadow: 0 0 10px #fff;
            margin-bottom: 30px;
        }
        
        .status-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: rgba(0, 20, 0, 0.9);
            padding: 10px;
            text-align: center;
            border-top: 2px solid #0a0;
            z-index: 100;
        }
        
        .progress {
            color: #0ff;
            font-weight: bold;
        }
        
        .lockdown-warning {
            position: fixed;
            top: 10px;
            left: 10px;
            color: #f00;
            font-weight: bold;
            animation: blink 0.5s infinite;
        }
        
        .char {
            position: absolute;
            color: #0f0;
            font-size: 20px;
            font-weight: bold;
        }
        
        .congrats-text {
            color: #0f0;
            font-size: 2.5em;
            margin: 20px 0;
            text-shadow: 0 0 10px #0f0;
            animation: colorChange 3s infinite;
        }
        
        @keyframes colorChange {
            0% { color: #0f0; }
            33% { color: #0ff; }
            66% { color: #f0f; }
            100% { color: #0f0; }
        }
        
        #blocker {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 0, 0, 0.9);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        
        #closeAttempts {
            font-size: 4em;
            color: white;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        #attemptText {
            color: white;
            font-size: 2em;
            text-align: center;
        }
        
        .class-buttons {
            display: flex;
            gap: 20px;
            margin: 30px 0;
        }
        
        .class-btn {
            background-color: #002200;
            color: #0f0;
            border: 2px solid #0f0;
            padding: 20px 40px;
            font-size: 1.5em;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
            min-width: 150px;
        }
        
        .class-btn:hover {
            background-color: #0f0;
            color: #000;
            box-shadow: 0 0 20px #0f0;
            transform: scale(1.05);
        }
        
        .class-btn.selected {
            background-color: #0f0;
            color: #000;
            font-weight: bold;
            box-shadow: 0 0 25px #0f0;
        }
        
        .class-info {
            color: #0ff;
            font-size: 1.2em;
            margin-top: 20px;
            max-width: 600px;
            text-align: center;
        }
        
        .code-block {
            background-color: #001100;
            border: 1px solid #0a0;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            text-align: left;
            color: #0ff;
        }
        
        .highlight {
            color: #ff0;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="matrix"></div>
    
    <div id="blocker">
        <div id="closeAttempts">0</div>
        <div id="attemptText">ПОПЫТКА НЕСАНКЦИОНИРОВАННОГО ВЫХОДА<br>СИСТЕМА ЗАБЛОКИРОВАНА</div>
    </div>
    
    <!-- Экран выбора класса -->
    <div id="classSelectScreen" class="screen">
        <h1>СИСТЕМА БЕЗОПАСНОСТИ</h1>
        <h2>ДОСТУП К ЦЕНТРАЛЬНОМУ СЕРВЕРУ</h2>
        
        <h3 style="color: #0ff; margin-top: 30px;">ВЫБЕРИТЕ КЛАСС ДОСТУПА</h3>
        
        <div class="class-buttons">
            <button class="class-btn" onclick="selectClass(7)">7 КЛАСС</button>
            <button class="class-btn" onclick="selectClass(8)">8 КЛАСС</button>
        </div>
        
        <div class="class-info">
            <div id="class7info" style="display: none;">
                <p>ИНФОРМАТИКА 7 КЛАСС</p>
                <p>• Вес файлов и единицы измерения</p>
                <p>• Цветовые модели (RGB)</p>
                <p>• Кодирование текстовой информации</p>
                <p>• Кодирование звука</p>
                <p>• Основы Python (синтаксис, переменные)</p>
            </div>
            <div id="class8info" style="display: none;">
                <p>ИНФОРМАТИКА 8 КЛАСС</p>
                <p>• Системы счисления (2, 8, 10, 16)</p>
                <p>• Круги Эйлера (теория множеств)</p>
                <p>• Алгебра логики (таблицы истинности)</p>
                <p>• Логические операции (И, ИЛИ, НЕ)</p>
                <p>• Решение логических уравнений</p>
            </div>
        </div>
        
        <div id="activateBtnContainer" style="display: none; margin-top: 30px;">
            <button class="btn" onclick="startGame()">АКТИВИРОВАТЬ СИСТЕМУ</button>
        </div>
        
        <div style="margin-top: 50px;">
            <p class="warning">ВНИМАНИЕ: ПОПЫТКИ ВЫХОДА БУДУТ ЗАБЛОКИРОВАНЫ</p>
        </div>
    </div>
    
    <!-- Экран вопросов -->
    <div id="questionScreen" class="screen" style="display: none;">
        <h2>ТЕСТ БЕЗОПАСНОСТИ</h2>
        <h3 id="questionNumber">Вопрос 1 из 15</h3>
        <div id="questionType" style="color: #ff0;">Тема: Загрузка...</div>
        
        <div class="question-container">
            <div id="questionText" class="question-text">
                Загрузка вопроса...
            </div>
            
            <div id="options" class="options">
                <!-- Варианты ответов будут здесь -->
            </div>
            
            <div class="question-nav">
                <button class="btn" onclick="prevQuestion()" id="prevBtn">← НАЗАД</button>
                <button class="btn" onclick="nextQuestion()" id="nextBtn">ДАЛЕЕ →</button>
            </div>
        </div>
        
        <div class="question-list" id="questionList">
            <div style="color: #0f0; margin-bottom: 10px; font-weight: bold;">ВОПРОСЫ:</div>
        </div>
    </div>
    
    <!-- Экран пароля -->
    <div id="passwordScreen" class="screen" style="display: none;">
        <h2>ФИНАЛЬНЫЙ ШАГ</h2>
        <h3 style="color: #f00;">ПРИШЛО ВРЕМЯ УЙТИ ОТСЮДА</h3>
        <div style="color: #0f0; font-size: 1.2em; max-width: 800px; margin: 20px auto;">
            Введи пароль - это правильные ответы на все предыдущие вопросы по порядку
        </div>
        
        <div class="password-input" id="passwordDisplay">_______________</div>
        
        <div style="color: #ff0; margin-bottom: 20px;">
            Введите 15-значный пароль (номера правильных ответов на вопросы 1-15)
        </div>
        
        <div class="keypad" id="keypad">
            <!-- Клавиатура будет создана JavaScript -->
        </div>
        
        <div style="margin-top: 30px;">
            <button class="btn" onclick="checkPassword()">ПРОВЕРИТЬ ПАРОЛЬ</button>
            <button class="btn btn-blue" onclick="backToQuestions()">← К ВОПРОСАМ</button>
        </div>
    </div>
    
    <!-- Экран блокировки -->
    <div id="lockdownScreen" class="screen lockdown-screen" style="display: none;">
        <div class="lockdown-text">!</div>
        <div class="lockdown-text">ПОПЫТКА НЕСАНКЦИОНИРОВАННОГО ВЫХОДА</div>
        <div class="lockdown-text">СИСТЕМА ЗАБЛОКИРОВАНА</div>
        
        <div style="background-color: #000; padding: 20px; border-radius: 10px; margin: 30px; max-width: 400px;">
            <div class="password-input" id="lockdownDisplay">________</div>
            <div style="color: #fff; margin: 10px 0;" id="lockdownMessage">
                Введите пароль для разблокировки
            </div>
            
            <div class="keypad" id="lockdownKeypad">
                <!-- Клавиатура блокировки будет создана JavaScript -->
            </div>
            
            <div style="margin-top: 20px;">
                <button class="btn btn-red" onclick="checkLockdownPassword()">ВВОД</button>
            </div>
        </div>
        
        <div class="lockdown-warning" id="lockdownWarning">
            РЕЖИМ БЛОКИРОВКИ АКТИВИРОВАН
        </div>
    </div>
    
    <!-- Экран поздравления -->
    <div id="congratsScreen" class="screen" style="display: none;">
        <div class="congrats-text">ДОСТУП РАЗРЕШЕН</div>
        <div class="congrats-text">СИСТЕМНЫЙ ВЗЛОМ УСПЕШЕН</div>
        <div class="congrats-text">ПАРОЛЬ ПОДТВЕРЖДЕН</div>
        <div class="congrats-text">ВЫ ПОЛУЧАЕТЕ 5 ЗА УРОК</div>
        <div class="congrats-text">ОЦЕНКА: 5/5</div>
        
        <button class="btn btn-red" onclick="exitGame()" style="margin-top: 50px;">ВЫЙТИ ИЗ СИСТЕМЫ</button>
    </div>
    
    <div class="status-bar" id="statusBar" style="display: none;">
        <div class="progress" id="progressText">Ответов: 0/15</div>
        <div style="color: #f00;">СИСТЕМА ЗАБЛОКИРОВАНА • ИСПОЛЬЗУЙТЕ МЫШЬ</div>
    </div>

    <script>
        // === ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ ===
        let currentGrade = null;
        let currentGame = null;
        let userAnswers = [];
        let gameState = "classSelect";
        let currentQuestionIndex = 0;
        let userPassword = "";
        let lockdownPassword = "";
        let lockdownAttempts = 0;
        let closeAttempts = 0;
        let isLocked = true;
        let correctPassword = "";
        let unlockPassword = "";
        
        // === БАНК ВОПРОСОВ ПО КЛАССАМ ===
        const QUESTION_BANK = {
            7: [
                // 1. Вес файлов (3 вопроса)
                {
                    text: "Сколько Кбайт в 4 Мбайтах?",
                    correct: 4096,
                    type: "Вес файлов",
                    explanation: "1 Мбайт = 1024 Кбайт, поэтому 4 Мбайта = 4 × 1024 = 4096 Кбайт"
                },
                {
                    text: "Фотография размером 2048×1536 пикселей сохранена в формате без сжатия с палитрой 256 цветов. Какой ее размер в Кбайтах?",
                    correct: 3072,
                    type: "Вес файлов",
                    explanation: "256 цветов = 8 бит на пиксель (2⁸=256). Пикселей: 2048×1536 = 3,145,728. Бит: 3,145,728 × 8 = 25,165,824. Байт: 25,165,824 / 8 = 3,145,728. Кбайт: 3,145,728 / 1024 = 3072"
                },
                {
                    text: "Сколько страниц текста (каждая страница 40 строк по 60 символов) можно сохранить в файле размером 120 Кбайт в кодировке ASCII?",
                    correct: 51,
                    type: "Вес файлов",
                    explanation: "1 символ ASCII = 1 байт. Страница: 40×60 = 2400 байт. 120 Кбайт = 120×1024 = 122,880 байт. Страниц: 122,880 / 2400 ≈ 51.2"
                },
                
                // 2. Цветовые модели RGB (3 вопроса)
                {
                    text: "Какой цвет получится при смешивании RGB(255, 255, 0)?",
                    correct: 3,
                    type: "Цветовые модели",
                    options: ["1. Синий", "2. Фиолетовый", "3. Желтый", "4. Голубой"],
                    correctText: "Желтый",
                    explanation: "Красный (255,0,0) + Зеленый (0,255,0) = Желтый (255,255,0)"
                },
                {
                    text: "Сколько бит требуется для кодирования одного пикселя в режиме True Color (24-битный RGB)?",
                    correct: 24,
                    type: "Цветовые модели",
                    explanation: "True Color использует 8 бит на каждый канал (R, G, B): 8×3 = 24 бита"
                },
                {
                    text: "Какой цвет соответствует RGB(0, 255, 255)?",
                    correct: 4,
                    type: "Цветовые модели",
                    options: ["1. Красный", "2. Зеленый", "3. Желтый", "4. Голубой"],
                    correctText: "Голубой",
                    explanation: "Зеленый (0,255,0) + Синий (0,0,255) = Голубой (0,255,255)"
                },
                
                // 3. Текстовая информация (3 вопроса)
                {
                    text: "Сколько байт займет слово 'ПРИВЕТ' в кодировке UTF-8?",
                    correct: 12,
                    type: "Текстовая информация",
                    explanation: "В UTF-8 русские буквы занимают по 2 байта. 'ПРИВЕТ' = 6 букв × 2 байта = 12 байт"
                },
                {
                    text: "Текст объемом 5 Кбайт содержит 5120 символов. Сколько бит отводится на кодирование одного символа?",
                    correct: 8,
                    type: "Текстовая информация",
                    explanation: "5 Кбайт = 5×1024×8 = 40960 бит. На символ: 40960 / 5120 = 8 бит"
                },
                {
                    text: "В кодировке Windows-1251 для русского алфавита используется таблица из 256 символов. Сколько бит требуется для кодирования одного символа?",
                    correct: 8,
                    type: "Текстовая информация",
                    explanation: "256 = 2⁸, значит требуется 8 бит на символ"
                },
                
                // 4. Кодирование звука (3 вопроса)
                {
                    text: "Моноаудиофайл оцифрован с частотой 44.1 кГц и глубиной 16 бит. Какой объем (в Мбайтах) займет 2 минуты звука?",
                    correct: 10,
                    type: "Кодирование звука",
                    explanation: "44,100 Гц × 16 бит × 120 секунд = 84,672,000 бит = 10,584,000 байт ≈ 10.1 Мбайт"
                },
                {
                    text: "Стереозвук оцифрован с частотой 22.05 кГц и глубиной 8 бит. Сколько Мбайт займет 3 минуты?",
                    correct: 8,
                    type: "Кодирование звука",
                    explanation: "22,050 × 8 × 2 канала × 180 секунд = 63,504,000 бит = 7,938,000 байт ≈ 7.57 Мбайт"
                },
                {
                    text: "Частота дискретизации 48 кГц означает, что за секунду производится:",
                    correct: 48000,
                    type: "Кодирование звука",
                    explanation: "48 кГц = 48,000 измерений в секунду"
                },
                
                // 5. Python (3 вопроса)
                {
                    text: "Что выведет программа: x = 5; y = 2; print(x ** y)",
                    correct: 25,
                    type: "Python",
                    explanation: "** - оператор возведения в степень. 5² = 25"
                },
                {
                    text: "Какое значение будет у переменной a после выполнения: a = 10; a += 5; a *= 2",
                    correct: 30,
                    type: "Python",
                    explanation: "a = 10; a += 5 → a = 15; a *= 2 → a = 30"
                },
                {
                    text: "Сколько раз выполнится цикл: for i in range(1, 10, 2): print(i)",
                    correct: 5,
                    type: "Python",
                    explanation: "range(1, 10, 2) генерирует: 1, 3, 5, 7, 9 - 5 значений"
                }
            ],
            
            8: [
                // 1. Системы счисления (5 вопросов)
                {
                    text: "Переведите двоичное число 101101 в десятичную систему.",
                    correct: 45,
                    type: "Системы счисления",
                    explanation: "101101₂ = 1×2⁵ + 0×2⁴ + 1×2³ + 1×2² + 0×2¹ + 1×2⁰ = 32 + 0 + 8 + 4 + 0 + 1 = 45"
                },
                {
                    text: "Чему равна сумма чисел 1011₂ и 1101₂ в двоичной системе?",
                    correct: 11000,
                    type: "Системы счисления",
                    explanation: "1011₂ = 11₁₀, 1101₂ = 13₁₀, сумма = 24₁₀ = 11000₂"
                },
                {
                    text: "Переведите восьмеричное число 47 в десятичную систему.",
                    correct: 39,
                    type: "Системы счисления",
                    explanation: "47₈ = 4×8¹ + 7×8⁰ = 32 + 7 = 39"
                },
                {
                    text: "Переведите шестнадцатеричное число A7 в десятичную систему.",
                    correct: 167,
                    type: "Системы счисления",
                    explanation: "A7₁₆ = 10×16¹ + 7×16⁰ = 160 + 7 = 167"
                },
                {
                    text: "Сколько единиц в двоичной записи числа 63?",
                    correct: 6,
                    type: "Системы счисления",
                    explanation: "63₁₀ = 111111₂ (шесть единиц)"
                },
                
                // 2. Круги Эйлера (5 вопросов)
                {
                    text: "В классе 30 учеников. 18 изучают английский, 16 - французский, 7 - оба языка. Сколько учеников не изучают ни одного языка?",
                    correct: 3,
                    type: "Круги Эйлера",
                    explanation: "Только английский: 18-7=11. Только французский: 16-7=9. Оба: 7. Итого изучают: 11+9+7=27. Не изучают: 30-27=3"
                },
                {
                    text: "Из 40 туристов 25 знают английский, 20 - немецкий, 10 - оба языка. Сколько туристов не знают ни одного языка?",
                    correct: 5,
                    type: "Круги Эйлера",
                    explanation: "Только английский: 25-10=15. Только немецкий: 20-10=10. Оба: 10. Итого знают: 15+10+10=35. Не знают: 40-35=5"
                },
                {
                    text: "В школе 100 учеников. 60 любят математику, 50 - физику, 30 - обе науки. Сколько учеников не любят ни математику, ни физику?",
                    correct: 20,
                    type: "Круги Эйлера",
                    explanation: "Только математику: 60-30=30. Только физику: 50-30=20. Обе: 30. Итого любят: 30+20+30=80. Не любят: 100-80=20"
                },
                {
                    text: "На заводе 70 рабочих. 45 умеют работать на станке А, 50 - на станке Б, 30 - на обоих. Сколько рабочих не умеют работать ни на одном станке?",
                    correct: 5,
                    type: "Круги Эйлера",
                    explanation: "Только А: 45-30=15. Только Б: 50-30=20. Оба: 30. Итого умеют: 15+20+30=65. Не умеют: 70-65=5"
                },
                {
                    text: "В группе 28 студентов. Все изучают хотя бы один язык: 15 - английский, 12 - немецкий, 5 - оба. Сколько изучают только один язык?",
                    correct: 17,
                    type: "Круги Эйлера",
                    explanation: "Только английский: 15-5=10. Только немецкий: 12-5=7. Только один: 10+7=17"
                },
                
                // 3. Алгебра логики (5 вопросов)
                {
                    text: "Для какого значения X истинно выражение: (X > 3) И (X < 7)?",
                    correct: 5,
                    type: "Алгебра логики",
                    explanation: "X должен быть больше 3 И меньше 7, например 4, 5 или 6. 5 - одно из возможных значений"
                },
                {
                    text: "Какое значение имеет выражение: (1 И 0) ИЛИ (НЕ(0))?",
                    correct: 1,
                    type: "Алгебра логики",
                    explanation: "1 И 0 = 0. НЕ(0) = 1. 0 ИЛИ 1 = 1"
                },
                {
                    text: "Сколько решений имеет уравнение: (X > 2) И (X < 6) И (X ≠ 4)?",
                    correct: 3,
                    type: "Алгебра логики",
                    explanation: "X может быть 3, 5 (так как 2 < X < 6 и X ≠ 4). 3, 5 и также можно добавить дробные числа, но целых решений: 3 и 5. В вопросе подразумеваются целые числа"
                },
                {
                    text: "Для какого значения X ложно выражение: (X > 5) ИЛИ (X < 5)?",
                    correct: 5,
                    type: "Алгебра логики",
                    explanation: "При X=5: (5>5)=ложь, (5<5)=ложь. Ложь ИЛИ ложь = ложь"
                },
                {
                    text: "Какое значение имеет выражение: НЕ(1 ИЛИ 0)?",
                    correct: 0,
                    type: "Алгебра логики",
                    explanation: "1 ИЛИ 0 = 1. НЕ(1) = 0"
                }
            ]
        };
        
        // === АЛГОРИТМ ГЕНЕРАЦИИ ВАРИАНТОВ ОТВЕТОВ ===
        function generateWrongAnswers(correct, count = 3, type = "number") {
            const wrongAnswers = [];
            const used = new Set([correct]);
            
            // Для вопросов с готовыми вариантами
            if (type === "choice") {
                // Возвращаем готовые варианты из вопроса
                return [];
            }
            
            // Определяем диапазон ±5 для обычных чисел
            let min = correct - 5;
            let max = correct + 5;
            
            // Корректируем для специальных случаев
            if (correct <= 5) {
                min = Math.max(1, correct - 3);
                max = correct + 3;
            }
            
            // Для больших чисел делаем диапазон относительным
            if (correct > 100) {
                const percent = Math.max(10, Math.floor(correct * 0.1)); // 10% от числа
                min = correct - percent;
                max = correct + percent;
            }
            
            // Для очень больших чисел
            if (correct > 10000) {
                const percent = Math.max(500, Math.floor(correct * 0.05)); // 5% от числа
                min = correct - percent;
                max = correct + percent;
            }
            
            let attempts = 0;
            while (wrongAnswers.length < count && attempts < 50) {
                attempts++;
                let candidate;
                
                // Сначала пытаемся в диапазоне ±5
                candidate = Math.floor(Math.random() * (max - min + 1)) + min;
                
                // Если кандидат слишком близок к правильному или уже использован
                if (Math.abs(candidate - correct) < 2 || used.has(candidate) || candidate <= 0) {
                    // Генерируем по-другому
                    const offset = (wrongAnswers.length + 1) * 7 + 3;
                    candidate = correct + (Math.random() > 0.5 ? offset : -offset);
                }
                
                // Убедимся, что число положительное и уникальное
                if (candidate > 0 && !used.has(candidate) && candidate !== correct) {
                    wrongAnswers.push(candidate);
                    used.add(candidate);
                }
            }
            
            // Если не хватило вариантов, добавляем гарантированно разные
            while (wrongAnswers.length < count) {
                const offset = (wrongAnswers.length + 1) * 10;
                let candidate = correct + offset;
                if (!used.has(candidate)) {
                    wrongAnswers.push(candidate);
                    used.add(candidate);
                }
            }
            
            return wrongAnswers;
        }
        
        // === ВЫБОР КЛАССА ===
        function selectClass(grade) {
            currentGrade = grade;
            
            // Снимаем выделение со всех кнопок
            document.querySelectorAll('.class-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Выделяем выбранную кнопку
            event.target.classList.add('selected');
            
            // Показываем информацию о классе
            document.getElementById('class7info').style.display = grade === 7 ? 'block' : 'none';
            document.getElementById('class8info').style.display = grade === 8 ? 'block' : 'none';
            
            // Показываем кнопку активации
            document.getElementById('activateBtnContainer').style.display = 'block';
        }
        
        // === НАЧАЛО ИГРЫ ===
        function startGame() {
            if (!currentGrade) {
                alert('Сначала выберите класс!');
                return;
            }
            
            // Генерируем тест для выбранного класса
            const allQuestions = QUESTION_BANK[currentGrade];
            
            // Выбираем 15 случайных вопросов
            const selectedQuestions = [];
            const shuffled = [...allQuestions].sort(() => Math.random() - 0.5);
            
            for (let i = 0; i < 15 && i < shuffled.length; i++) {
                const question = shuffled[i];
                
                let options = [];
                let correctIndex;
                
                // Если у вопроса уже есть готовые варианты (для вопросов с выбором цвета)
                if (question.options) {
                    options = question.options;
                    correctIndex = question.correct - 1; // correct хранит номер правильного варианта
                } else {
                    // Генерируем неправильные ответы
                    const wrongAnswers = generateWrongAnswers(question.correct, 3);
                    const allAnswers = [...wrongAnswers, question.correct];
                    
                    // Перемешиваем
                    for (let j = allAnswers.length - 1; j > 0; j--) {
                        const k = Math.floor(Math.random() * (j + 1));
                        [allAnswers[j], allAnswers[k]] = [allAnswers[k], allAnswers[j]];
                    }
                    
                    // Находим индекс правильного ответа
                    correctIndex = allAnswers.indexOf(question.correct);
                    options = allAnswers;
                }
                
                selectedQuestions.push({
                    ...question,
                    options: options,
                    correctIndex: correctIndex,
                    originalCorrect: question.correct
                });
            }
            
            currentGame = selectedQuestions;
            userAnswers = new Array(selectedQuestions.length).fill(-1);
            currentQuestionIndex = 0;
            
            // Генерируем пароли
            correctPassword = selectedQuestions.map(q => q.correctIndex + 1).join('');
            
            // Генерируем случайный код разблокировки
            unlockPassword = Array.from({length: 8}, () => 
                Math.floor(Math.random() * 10)).join('');
            
            console.log("=== ДЕБАГ ИНФОРМАЦИЯ ===");
            console.log("Класс:", currentGrade);
            console.log("Пароль для прохождения:", correctPassword);
            console.log("Код разблокировки:", unlockPassword);
            console.log("======================");
            
            // Переключаем экран
            gameState = "questions";
            document.getElementById('classSelectScreen').style.display = 'none';
            document.getElementById('questionScreen').style.display = 'flex';
            document.getElementById('statusBar').style.display = 'block';
            
            updateQuestion();
            updateQuestionList();
            updateProgress();
        }
        
        // === ОБНОВЛЕНИЕ ВОПРОСА ===
        function updateQuestion() {
            if (!currentGame || currentQuestionIndex >= currentGame.length) return;
            
            const q = currentGame[currentQuestionIndex];
            document.getElementById('questionNumber').textContent = `Вопрос ${currentQuestionIndex + 1} из 15`;
            document.getElementById('questionType').textContent = `Тема: ${q.type}`;
            document.getElementById('questionText').textContent = q.text;
            
            document.getElementById('prevBtn').style.visibility = currentQuestionIndex > 0 ? 'visible' : 'hidden';
            document.getElementById('nextBtn').textContent = currentQuestionIndex < 14 ? 'ДАЛЕЕ →' : 'К ПАРОЛЮ →';
            
            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = '';
            
            q.options.forEach((option, index) => {
                const div = document.createElement('div');
                div.className = `option ${userAnswers[currentQuestionIndex] === index ? 'selected' : ''}`;
                div.textContent = `${index + 1}. ${option}`;
                div.onclick = () => selectOption(index);
                optionsDiv.appendChild(div);
            });
        }
        
        function selectOption(index) {
            userAnswers[currentQuestionIndex] = index;
            updateQuestion();
            updateQuestionList();
            updateProgress();
        }
        
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                updateQuestion();
                updateQuestionList();
            }
        }
        
        function nextQuestion() {
            if (currentQuestionIndex < 14) {
                currentQuestionIndex++;
                updateQuestion();
                updateQuestionList();
            } else {
                showPasswordScreen();
            }
        }
        
        function updateQuestionList() {
            const listDiv = document.getElementById('questionList');
            listDiv.innerHTML = '<div style="color: #0f0; margin-bottom: 10px; font-weight: bold;">ВОПРОСЫ:</div>';
            
            for (let i = 0; i < 15; i++) {
                const div = document.createElement('div');
                div.className = 'question-item';
                
                if (i === currentQuestionIndex) div.classList.add('current');
                if (userAnswers[i] !== -1) div.classList.add('answered');
                
                div.textContent = `${i + 1}. ${currentGame[i].type.substring(0, 8)}` + 
                                (userAnswers[i] !== -1 ? ` [${userAnswers[i] + 1}]` : '');
                
                div.onclick = () => {
                    currentQuestionIndex = i;
                    updateQuestion();
                    updateQuestionList();
                };
                
                listDiv.appendChild(div);
            }
        }
        
        function updateProgress() {
            const answered = userAnswers.filter(a => a !== -1).length;
            document.getElementById('progressText').textContent = `Ответов: ${answered}/15`;
        }
        
        // === ЭКРАН ПАРОЛЯ ===
        function showPasswordScreen() {
            gameState = "password";
            document.getElementById('questionScreen').style.display = 'none';
            document.getElementById('passwordScreen').style.display = 'flex';
            userPassword = "";
            updatePasswordDisplay();
            createKeypad();
        }
        
        function updatePasswordDisplay() {
            let display = userPassword;
            while (display.length < 15) display += '_';
            
            let formatted = '';
            for (let i = 0; i < display.length; i++) {
                formatted += display[i];
                if ((i + 1) % 5 === 0 && i < 14) formatted += ' ';
            }
            
            document.getElementById('passwordDisplay').textContent = formatted;
        }
        
        function createKeypad() {
            const keypad = document.getElementById('keypad');
            keypad.innerHTML = '';
            
            for (let i = 1; i <= 9; i++) {
                const btn = document.createElement('button');
                btn.className = 'keypad-btn';
                btn.textContent = i;
                btn.onclick = () => addToPassword(i.toString());
                keypad.appendChild(btn);
            }
            
            const zeroBtn = document.createElement('button');
            zeroBtn.className = 'keypad-btn';
            zeroBtn.textContent = '0';
            zeroBtn.onclick = () => addToPassword('0');
            keypad.appendChild(zeroBtn);
            
            const delBtn = document.createElement('button');
            delBtn.className = 'keypad-btn btn-red';
            delBtn.textContent = '⌫';
            delBtn.onclick = () => {
                userPassword = userPassword.slice(0, -1);
                updatePasswordDisplay();
            };
            keypad.appendChild(delBtn);
        }
        
        function addToPassword(digit) {
            if (userPassword.length < 15) {
                userPassword += digit;
                updatePasswordDisplay();
            }
        }
        
        function checkPassword() {
            if (userPassword.length !== 15) {
                alert('Пароль должен содержать ровно 15 цифр!');
                return;
            }
            
            if (userPassword === correctPassword) {
                gameState = "congrats";
                document.getElementById('passwordScreen').style.display = 'none';
                document.getElementById('congratsScreen').style.display = 'flex';
                isLocked = false;
            } else {
                alert('НЕВЕРНЫЙ ПАРОЛЬ!\nДоступ запрещён.\nПароль сброшен.');
                userPassword = '';
                updatePasswordDisplay();
            }
        }
        
        function backToQuestions() {
            gameState = "questions";
            document.getElementById('passwordScreen').style.display = 'none';
            document.getElementById('questionScreen').style.display = 'flex';
            currentQuestionIndex = 14;
            updateQuestion();
            updateQuestionList();
        }
        
        // === БЛОКИРОВКА ВЫХОДА ===
        window.addEventListener('beforeunload', function(e) {
            if (gameState !== "congrats" && isLocked) {
                e.preventDefault();
                e.returnValue = '';
                triggerCloseAttempt();
                return '';
            }
        });
        
        function triggerCloseAttempt() {
            closeAttempts++;
            document.getElementById('closeAttempts').textContent = closeAttempts;
            document.getElementById('blocker').style.display = 'flex';
            
            setTimeout(() => {
                document.getElementById('blocker').style.display = 'none';
            }, 3000);
            
            if (closeAttempts >= 3) {
                triggerLockdown();
            }
        }
        
        function triggerLockdown() {
            gameState = "lockdown";
            showScreen('lockdownScreen');
            document.getElementById('statusBar').style.display = 'none';
            isLocked = true;
            lockdownPassword = "";
            updateLockdownDisplay();
            setupLockdownKeypad();
        }
        
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.style.display = 'none';
            });
            document.getElementById(screenId).style.display = 'flex';
        }
        
        function setupLockdownKeypad() {
            const keypad = document.getElementById('lockdownKeypad');
            keypad.innerHTML = '';
            
            for (let i = 1; i <= 9; i++) {
                const btn = document.createElement('button');
                btn.className = 'keypad-btn';
                btn.style.backgroundColor = '#000';
                btn.style.color = '#fff';
                btn.style.borderColor = '#fff';
                btn.textContent = i;
                btn.onclick = () => addToLockdownPassword(i.toString());
                keypad.appendChild(btn);
            }
            
            const zeroBtn = document.createElement('button');
            zeroBtn.className = 'keypad-btn';
            zeroBtn.style.backgroundColor = '#000';
            zeroBtn.style.color = '#fff';
            zeroBtn.style.borderColor = '#fff';
            zeroBtn.textContent = '0';
            zeroBtn.onclick = () => addToLockdownPassword('0');
            keypad.appendChild(zeroBtn);
            
            const delBtn = document.createElement('button');
            delBtn.className = 'keypad-btn';
            delBtn.style.backgroundColor = '#000';
            delBtn.style.color = '#fff';
            delBtn.style.borderColor = '#fff';
            delBtn.textContent = '⌫';
            delBtn.onclick = () => {
                lockdownPassword = lockdownPassword.slice(0, -1);
                updateLockdownDisplay();
            };
            keypad.appendChild(delBtn);
        }
        
        function addToLockdownPassword(digit) {
            if (lockdownPassword.length < 8) {
                lockdownPassword += digit;
                updateLockdownDisplay();
            }
        }
        
        function updateLockdownDisplay() {
            let display = '';
            for (let i = 0; i < 8; i++) {
                display += i < lockdownPassword.length ? '*' : '_';
            }
            document.getElementById('lockdownDisplay').textContent = display;
            
            if (lockdownAttempts > 0) {
                document.getElementById('lockdownMessage').innerHTML = 
                    `Неверный пароль. Попыток: ${lockdownAttempts}/3`;
            }
        }
        
        function checkLockdownPassword() {
            if (lockdownPassword === unlockPassword) {
                lockdownPassword = "";
                lockdownAttempts = 0;
                isLocked = false;
                
                if (gameState === "lockdown") {
                    gameState = "questions";
                    showScreen('questionScreen');
                    document.getElementById('statusBar').style.display = 'block';
                    updateQuestion();
                    updateQuestionList();
                }
            } else {
                lockdownAttempts++;
                lockdownPassword = "";
                updateLockdownDisplay();
                
                if (lockdownAttempts >= 3) {
                    document.getElementById('lockdownMessage').innerHTML = 
                        'СИСТЕМА ОКОНЧАТЕЛЬНО ЗАБЛОКИРОВАНА<br>Перезагрузите страницу';
                    document.getElementById('lockdownKeypad').innerHTML = '';
                    document.querySelector('#lockdownScreen button').style.display = 'none';
                }
            }
        }
        
        function exitGame() {
            if (gameState === "congrats") {
                alert('SYSTEM_BREACH завершён. Окно закроется через 3 секунды...');
                document.body.style.opacity = '0';
                document.body.style.transition = 'opacity 3s';
                
                setTimeout(() => {
                    window.close();
                }, 3000);
            }
        }
        
        // === МАТРИЧНЫЙ ЭФФЕКТ ===
        function initMatrix() {
            const matrixDiv = document.getElementById('matrix');
            const chars = "01█▓▒░╬╣║╗╝╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌┐└┴┬├┼╞╟╚╔╩╦╠═╬░▒▓█";
            const matrixElements = [];
            
            for (let i = 0; i < 80; i++) {
                const char = document.createElement('div');
                char.className = 'char';
                char.textContent = chars[Math.floor(Math.random() * chars.length)];
                char.style.left = Math.random() * 100 + 'vw';
                char.style.top = Math.random() * 100 + 'vh';
                char.style.opacity = Math.random() * 0.5 + 0.2;
                matrixDiv.appendChild(char);
                matrixElements.push({
                    element: char,
                    speed: Math.random() * 2 + 0.5,
                    resetPos: Math.random() * -200 - 100
                });
            }
            
            setInterval(() => {
                matrixElements.forEach(item => {
                    let top = parseFloat(item.element.style.top);
                    top += item.speed;
                    
                    if (top > 100) {
                        top = item.resetPos;
                        item.element.style.left = Math.random() * 100 + 'vw';
                        item.element.textContent = chars[Math.floor(Math.random() * chars.length)];
                        item.element.style.opacity = Math.random() * 0.5 + 0.2;
                    }
                    
                    item.element.style.top = top + 'vh';
                    
                    // Плавное появление и исчезновение
                    if (top < 10) {
                        item.element.style.opacity = top / 10;
                    } else if (top > 90) {
                        item.element.style.opacity = (100 - top) / 10;
                    }
                });
            }, 50);
        }
        
        // === БЛОКИРОВКА КЛАВИШ ===
        function initBlockers() {
            document.addEventListener('keydown', function(e) {
                if (e.key === 'F4' && e.altKey || e.key === 'Escape' || 
                    (e.altKey && e.key === 'Tab') || (e.ctrlKey && e.key === 'w')) {
                    e.preventDefault();
                    triggerCloseAttempt();
                }
            });
            
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                if (gameState !== "classSelect") {
                    triggerLockdown();
                }
            });
        }
        
        // === ИНИЦИАЛИЗАЦИЯ ===
        window.onload = function() {
            initMatrix();
            initBlockers();
            
            console.log("=== SYSTEM_BREACH.exe ===");
            console.log("Хакерское тестирование по информатике");
            console.log("7 класс: Вес файлов, Цветовые модели, Текст, Звук, Python");
            console.log("8 класс: Системы счисления, Круги Эйлера, Алгебра логики");
            console.log("==============================");
        };
    </script>
</body>
</html>
