<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ТЕСТИРОВАНИЕ ВПР</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
            user-select: none;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
            min-height: 90vh;
        }
        
        .header {
            background: linear-gradient(135deg, #4a6fa5 0%, #2c3e50 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header h2 {
            font-size: 1.2em;
            opacity: 0.9;
            font-weight: normal;
        }
        
        .screen {
            padding: 30px;
            display: none;
        }
        
        .screen.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .grade-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin: 40px 0;
        }
        
        .grade-btn {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border: none;
            padding: 25px;
            font-size: 1.3em;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.3);
        }
        
        .grade-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(106, 17, 203, 0.4);
        }
        
        .grade-btn:active {
            transform: translateY(-2px);
        }
        
        .question-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid #4a6fa5;
        }
        
        .question-text {
            font-size: 1.2em;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .option {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 18px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
        }
        
        .option:hover {
            border-color: #4a6fa5;
            background: #f0f7ff;
        }
        
        .option.selected {
            border-color: #4a6fa5;
            background: #e3f2fd;
        }
        
        .option-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #4a6fa5;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 15px;
            font-weight: bold;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .nav-btn {
            background: #4a6fa5;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s;
        }
        
        .nav-btn:hover {
            background: #3a5a8a;
        }
        
        .nav-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
        
        .progress-bar {
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4a6fa5, #6a11cb);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .question-counter {
            text-align: center;
            color: #666;
            margin: 10px 0;
            font-size: 0.9em;
        }
        
        .results-screen {
            text-align: center;
            padding: 50px 20px;
        }
        
        .results-grade {
            font-size: 4em;
            color: #4a6fa5;
            margin: 20px 0;
            font-weight: bold;
        }
        
        .results-text {
            font-size: 1.5em;
            margin: 20px 0;
            color: #333;
        }
        
        .restart-btn {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.3);
        }
        
        .question-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }
        
        .question-list-btn {
            width: 50px;
            height: 50px;
            border: 2px solid #4a6fa5;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .question-list-btn.current {
            background: #4a6fa5;
            color: white;
        }
        
        .question-list-btn.answered {
            background: #e3f2fd;
            border-color: #2196f3;
        }
        
        .timer {
            text-align: right;
            color: #666;
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        
        .subject-info {
            text-align: center;
            color: #666;
            margin: 10px 0;
            font-size: 1.1em;
        }
        
        @media (max-width: 768px) {
            .grade-buttons {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .container {
                margin: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ВСЕРОССИЙСКИЕ ПРОВЕРОЧНЫЕ РАБОТЫ</h1>
            <h2>Тестирование по материалам ФИПИ</h2>
        </div>
        
        <!-- Экран выбора класса -->
        <div id="gradeSelectScreen" class="screen active">
            <h2 style="text-align: center; margin: 30px 0; color: #333;">ВЫБЕРИТЕ КЛАСС ДЛЯ ТЕСТИРОВАНИЯ</h2>
            <div class="grade-buttons">
                <button class="grade-btn" onclick="selectGrade(7)">7 КЛАСС</button>
                <button class="grade-btn" onclick="selectGrade(8)">8 КЛАСС</button>
                <button class="grade-btn" onclick="selectGrade(9)">9 КЛАСС</button>
                <button class="grade-btn" onclick="selectGrade(10)">10 КЛАСС</button>
            </div>
            <p style="text-align: center; color: #666; margin-top: 30px;">
                Тест содержит задания из открытого банка ФИПИ для ВПР
            </p>
        </div>
        
        <!-- Экран тестирования -->
        <div id="testScreen" class="screen">
            <div class="timer" id="timer">Время: 45:00</div>
            <div class="subject-info" id="subjectInfo">Математика 7 класс</div>
            <div class="question-counter" id="questionCounter">Вопрос 1 из 15</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <div class="question-container">
                <div class="question-text" id="questionText">Загрузка вопроса...</div>
                <div class="options" id="options">
                    <!-- Варианты ответов будут здесь -->
                </div>
            </div>
            
            <div class="navigation">
                <button class="nav-btn" onclick="prevQuestion()" id="prevBtn">← Назад</button>
                <button class="nav-btn" onclick="nextQuestion()" id="nextBtn">Далее →</button>
            </div>
            
            <div class="question-list" id="questionList">
                <!-- Кнопки навигации по вопросам -->
            </div>
        </div>
        
        <!-- Экран результатов -->
        <div id="resultsScreen" class="screen">
            <div class="results-screen">
                <h2>РЕЗУЛЬТАТЫ ТЕСТИРОВАНИЯ</h2>
                <div class="results-grade" id="finalGrade">5</div>
                <div class="results-text" id="resultText">Отличный результат!</div>
                <p id="resultDetails">Вы ответили правильно на 15 из 15 вопросов</p>
                <p style="color: #666; margin: 20px 0;">
                    Время выполнения: <span id="timeSpent">45:00</span>
                </p>
                <button class="restart-btn" onclick="restartTest()">Пройти тест заново</button>
            </div>
        </div>
    </div>

    <script>
        // === КОНФИГУРАЦИЯ ТЕСТА ===
        const CONFIG = {
            timeLimit: 45 * 60, // 45 минут в секундах
            questionsPerTest: 15
        };
        
        // === ПЕРЕМЕННЫЕ ===
        let currentGrade = null;
        let currentTest = null;
        let userAnswers = [];
        let currentQuestionIndex = 0;
        let timeLeft = CONFIG.timeLimit;
        let timerInterval = null;
        
        // === БАНК ВОПРОСОВ ПО КЛАССАМ ===
        const QUESTION_BANK = {
            7: [
                // МАТЕМАТИКА (5 вопросов)
                {
                    text: "В школе 800 учеников, из них 30% — ученики начальной школы. Среди учеников средней и старшей школы 20% изучают французский язык. Сколько учеников в школе изучают французский язык?",
                    correct: 112,
                    subject: "Математика",
                    category: "Проценты"
                },
                {
                    text: "Найдите значение выражения: 2,5 * 1,2 + 3,4 : 0,1",
                    correct: 37,
                    subject: "Математика", 
                    category: "Арифметика"
                },
                {
                    text: "Длина прямоугольника равна 12 см, а ширина составляет 75% от длины. Найдите периметр этого прямоугольника.",
                    correct: 42,
                    subject: "Математика",
                    category: "Геометрия"
                },
                {
                    text: "Сколько существует целых решений неравенства: -3 ≤ 2x - 1 < 5?",
                    correct: 4,
                    subject: "Математика",
                    category: "Алгебра"
                },
                {
                    text: "В классе 28 учеников. Отношение числа девочек к числу мальчиков равно 3:4. Сколько в классе девочек?",
                    correct: 12,
                    subject: "Математика",
                    category: "Отношения"
                },
                
                // РУССКИЙ ЯЗЫК (5 вопросов)
                {
                    text: "Сколько звуков в слове 'подъезд'?",
                    correct: 7,
                    subject: "Русский язык",
                    category: "Фонетика"
                },
                {
                    text: "Сколько грамматических основ в предложении: 'Солнце взошло, и птицы запели'?",
                    correct: 2,
                    subject: "Русский язык",
                    category: "Синтаксис"
                },
                {
                    text: "Укажите количество запятых, необходимых в предложении: 'Когда мы пришли домой который находился на окраине города уже стемнело.'",
                    correct: 3,
                    subject: "Русский язык",
                    category: "Пунктуация"
                },
                {
                    text: "Сколько приставок в слове 'переподготовка'?",
                    correct: 2,
                    subject: "Русский язык",
                    category: "Морфемика"
                },
                {
                    text: "Определите количество букв и звуков в слове 'объявление'",
                    correct: 20,
                    subject: "Русский язык",
                    category: "Фонетика"
                },
                
                // ОБЩЕСТВОЗНАНИЕ (5 вопросов)
                {
                    text: "В каком году была принята Конституция Российской Федерации?",
                    correct: 1993,
                    subject: "Обществознание",
                    category: "Право"
                },
                {
                    text: "Сколько субъектов в Российской Федерации?",
                    correct: 85,
                    subject: "Обществознание",
                    category: "Геополитика"
                },
                {
                    text: "Минимальный возраст для избрания Президентом РФ составляет:",
                    correct: 35,
                    subject: "Обществознание",
                    category: "Право"
                },
                {
                    text: "Сколько лет длилась Великая Отечественная война?",
                    correct: 4,
                    subject: "Обществознание", 
                    category: "История"
                },
                {
                    text: "В каком веке произошло Крещение Руси?",
                    correct: 10,
                    subject: "Обществознание",
                    category: "История"
                }
            ],
            
            8: [
                // Для 8 класса
                {
                    text: "Решите уравнение: 3(x - 4) = 2x + 5",
                    correct: 17,
                    subject: "Математика",
                    category: "Алгебра"
                },
                {
                    text: "Площадь прямоугольника 48 см², одна сторона 6 см. Найдите периметр.",
                    correct: 28,
                    subject: "Математика",
                    category: "Геометрия"
                },
                {
                    text: "Сколько звуков в слове 'объяснение'?",
                    correct: 10,
                    subject: "Русский язык",
                    category: "Фонетика"
                },
                {
                    text: "Год основания Санкт-Петербурга:",
                    correct: 1703,
                    subject: "История",
                    category: "Даты"
                },
                {
                    text: "Сколько планет в Солнечной системе?",
                    correct: 8,
                    subject: "География",
                    category: "Астрономия"
                }
            ],
            
            9: [
                // Для 9 класса  
                {
                    text: "Решите квадратное уравнение: x² - 5x + 6 = 0",
                    correct: 2,
                    subject: "Математика",
                    category: "Алгебра"
                },
                {
                    text: "Площадь круга с радиусом 7 см (π≈3,14)",
                    correct: 154,
                    subject: "Математика",
                    category: "Геометрия"
                },
                {
                    text: "Год отмены крепостного права в России:",
                    correct: 1861,
                    subject: "История",
                    category: "Даты"
                },
                {
                    text: "Атомный номер кислорода:",
                    correct: 8,
                    subject: "Химия",
                    category: "Периодическая таблица"
                },
                {
                    text: "Количество хромосом у человека:",
                    correct: 46,
                    subject: "Биология",
                    category: "Генетика"
                }
            ],
            
            10: [
                // Для 10 класса
                {
                    text: "Найдите производную функции: f(x) = 3x² - 2x + 1",
                    correct: 6,
                    subject: "Математика",
                    category: "Математический анализ"
                },
                {
                    text: "Год начала Первой мировой войны:",
                    correct: 1914,
                    subject: "История",
                    category: "Даты"
                },
                {
                    text: "Молярная масса воды H₂O (г/моль):",
                    correct: 18,
                    subject: "Химия",
                    category: "Расчеты"
                },
                {
                    text: "Период колебаний маятника длиной 1м (π≈3,14, g≈10)",
                    correct: 2,
                    subject: "Физика",
                    category: "Механика"
                },
                {
                    text: "Сколько пар рёбер у человека?",
                    correct: 12,
                    subject: "Биология",
                    category: "Анатомия"
                }
            ]
        };
        
        // === АЛГОРИТМ ГЕНЕРАЦИИ НЕПРАВИЛЬНЫХ ОТВЕТОВ ===
        function generateWrongAnswers(correctAnswer, count = 3) {
            const wrongAnswers = [];
            const usedNumbers = new Set([correctAnswer]);
            
            // Определяем диапазон ±5 от правильного ответа
            let minRange = correctAnswer - 5;
            let maxRange = correctAnswer + 5;
            
            // Корректируем для специальных случаев
            if (correctAnswer <= 5) {
                minRange = 1; // Не допускаем отрицательные или нулевые ответы
            }
            
            if (correctAnswer < 10) {
                // Для маленьких чисел делаем диапазон относительным
                minRange = Math.max(1, correctAnswer - 3);
                maxRange = correctAnswer + 3;
            }
            
            let attempts = 0;
            const maxAttempts = 50;
            
            while (wrongAnswers.length < count && attempts < maxAttempts) {
                attempts++;
                
                // Генерируем кандидата в диапазоне
                let candidate = Math.floor(Math.random() * (maxRange - minRange + 1)) + minRange;
                
                // Исключаем правильный ответ
                if (candidate === correctAnswer) {
                    continue;
                }
                
                // Проверяем уникальность
                if (!usedNumbers.has(candidate)) {
                    wrongAnswers.push(candidate);
                    usedNumbers.add(candidate);
                }
                
                // Если застряли, расширяем диапазон
                if (attempts % 10 === 0) {
                    minRange--;
                    maxRange++;
                }
            }
            
            // Если не удалось сгенерировать достаточно вариантов
            while (wrongAnswers.length < count) {
                let candidate = correctAnswer + (wrongAnswers.length + 1) * 10;
                if (!usedNumbers.has(candidate)) {
                    wrongAnswers.push(candidate);
                    usedNumbers.add(candidate);
                }
            }
            
            return wrongAnswers;
        }
        
        // === ФУНКЦИИ ТЕСТИРОВАНИЯ ===
        function selectGrade(grade) {
            currentGrade = grade;
            startTest();
        }
        
        function startTest() {
            // Получаем вопросы для выбранного класса
            const allQuestions = QUESTION_BANK[currentGrade];
            
            // Выбираем случайные вопросы
            const selectedQuestions = [];
            const shuffled = [...allQuestions].sort(() => Math.random() - 0.5);
            
            for (let i = 0; i < CONFIG.questionsPerTest && i < shuffled.length; i++) {
                const question = shuffled[i];
                
                // Генерируем варианты ответов
                const wrongAnswers = generateWrongAnswers(question.correct, 3);
                const allAnswers = [...wrongAnswers, question.correct];
                
                // Перемешиваем варианты
                for (let j = allAnswers.length - 1; j > 0; j--) {
                    const k = Math.floor(Math.random() * (j + 1));
                    [allAnswers[j], allAnswers[k]] = [allAnswers[k], allAnswers[j]];
                }
                
                // Находим индекс правильного ответа
                const correctIndex = allAnswers.indexOf(question.correct);
                
                selectedQuestions.push({
                    ...question,
                    options: allAnswers,
                    correctIndex: correctIndex
                });
            }
            
            currentTest = selectedQuestions;
            userAnswers = new Array(selectedQuestions.length).fill(-1);
            currentQuestionIndex = 0;
            timeLeft = CONFIG.timeLimit;
            
            // Показываем экран теста
            document.getElementById('gradeSelectScreen').classList.remove('active');
            document.getElementById('testScreen').classList.add('active');
            
            // Обновляем информацию
            document.getElementById('subjectInfo').textContent = `Класс: ${currentGrade} | Предметы: Математика, Русский язык, Обществознание`;
            
            // Запускаем таймер
            startTimer();
            
            // Показываем первый вопрос
            updateQuestion();
            updateQuestionList();
            updateProgress();
        }
        
        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                timeLeft--;
                
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('timer').textContent = 
                    `Время: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    finishTest();
                }
            }, 1000);
        }
        
        function updateQuestion() {
            if (!currentTest || currentQuestionIndex >= currentTest.length) return;
            
            const question = currentTest[currentQuestionIndex];
            
            // Обновляем текст вопроса
            document.getElementById('questionText').textContent = question.text;
            document.getElementById('questionCounter').textContent = 
                `Вопрос ${currentQuestionIndex + 1} из ${currentTest.length}`;
            
            // Обновляем кнопки навигации
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            document.getElementById('nextBtn').textContent = 
                currentQuestionIndex < currentTest.length - 1 ? 'Далее →' : 'Завершить тест';
            
            // Очищаем и заполняем варианты ответов
            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = `option ${userAnswers[currentQuestionIndex] === index ? 'selected' : ''}`;
                
                optionDiv.innerHTML = `
                    <div class="option-number">${index + 1}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionDiv.onclick = () => selectOption(index);
                optionsDiv.appendChild(optionDiv);
            });
        }
        
        function selectOption(index) {
            userAnswers[currentQuestionIndex] = index;
            updateQuestion();
            updateQuestionList();
            updateProgress();
        }
        
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                updateQuestion();
                updateQuestionList();
            }
        }
        
        function nextQuestion() {
            if (currentQuestionIndex < currentTest.length - 1) {
                currentQuestionIndex++;
                updateQuestion();
                updateQuestionList();
            } else {
                finishTest();
            }
        }
        
        function updateQuestionList() {
            const listDiv = document.getElementById('questionList');
            listDiv.innerHTML = '';
            
            for (let i = 0; i < currentTest.length; i++) {
                const btn = document.createElement('button');
                btn.className = 'question-list-btn';
                
                if (i === currentQuestionIndex) {
                    btn.classList.add('current');
                }
                
                if (userAnswers[i] !== -1) {
                    btn.classList.add('answered');
                }
                
                btn.textContent = i + 1;
                btn.onclick = () => {
                    currentQuestionIndex = i;
                    updateQuestion();
                    updateQuestionList();
                };
                
                listDiv.appendChild(btn);
            }
        }
        
        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / currentTest.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }
        
        function finishTest() {
            clearInterval(timerInterval);
            
            // Подсчитываем результаты
            let correctCount = 0;
            for (let i = 0; i < currentTest.length; i++) {
                if (userAnswers[i] === currentTest[i].correctIndex) {
                    correctCount++;
                }
            }
            
            // Вычисляем оценку
            const percentage = (correctCount / currentTest.length) * 100;
            let grade;
            let gradeText;
            
            if (percentage >= 85) {
                grade = 5;
                gradeText = "Отлично!";
            } else if (percentage >= 70) {
                grade = 4;
                gradeText = "Хорошо";
            } else if (percentage >= 50) {
                grade = 3;
                gradeText = "Удовлетворительно";
            } else {
                grade = 2;
                gradeText = "Неудовлетворительно";
            }
            
            // Форматируем затраченное время
            const timeSpent = CONFIG.timeLimit - timeLeft;
            const minutesSpent = Math.floor(timeSpent / 60);
            const secondsSpent = timeSpent % 60;
            const timeString = `${minutesSpent.toString().padStart(2, '0')}:${secondsSpent.toString().padStart(2, '0')}`;
            
            // Показываем результаты
            document.getElementById('testScreen').classList.remove('active');
            document.getElementById('resultsScreen').classList.add('active');
            
            document.getElementById('finalGrade').textContent = grade;
            document.getElementById('resultText').textContent = gradeText;
            document.getElementById('resultDetails').textContent = 
                `Вы ответили правильно на ${correctCount} из ${currentTest.length} вопросов`;
            document.getElementById('timeSpent').textContent = timeString;
        }
        
        function restartTest() {
            document.getElementById('resultsScreen').classList.remove('active');
            document.getElementById('gradeSelectScreen').classList.add('active');
            currentGrade = null;
            currentTest = null;
        }
        
        // === ИНИЦИАЛИЗАЦИЯ ===
        window.onload = function() {
            console.log("Тестирование ВПР загружено");
            console.log("Вопросы взяты из открытого банка ФИПИ");
        };
    </script>
</body>
</html>
